<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BlackAndWhite</title>
    <style type="text/css">
        *{margin: 0; padding: 0; font-size: 0; background-color: #000;}
        #allBody{width: 600px; height: 600px; padding: 20px; border: 5px solid lightblue; border-radius: 5px; margin: 50px auto; background-color: #ccc;}
        #allBody div{position: relative;}
        span{display: inline-block; width: 200px; height: 200px; border-radius: 20px; cursor: pointer; position: absolute;}
    </style>
</head>
<body>
    <div id = "allBody">
        <div>
            <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
        </div>
    </div>
    <script type="text/javascript">
        var posAry = [[0,0],[200,0],[400,0],[0,200],[200,200],[400,200],[0,400],[200,400],[400,400]];
        var spans = document.getElementsByTagName("span");
        function reset() {
            for(var i = 0; i < spans.length; i++){
                spans[i].style.backgroundColor = "white";
                spans[i].style.left = posAry[i][0] + "px";
                spans[i].style.top = posAry[i][1] + "px";
            }
        }
        reset();
        for(var i = 0; i < spans.length; i++) {
            spans[i].onclick = function () {
                this.style.backgroundColor = (this.style.backgroundColor == "white") ? "black" : "white";
                var leftValue = parseFloat(this.style.left);
                var topValue = parseFloat(this.style.top);
                for(var j = 0; j < spans.length; j++){
                    var lValue = parseFloat(spans[j].style.left);
                    var tValue = parseFloat(spans[j].style.top);
                    if(leftValue == lValue){
                        if((tValue == (topValue + 200)) || (tValue == (topValue - 200))){
                            spans[j].style.backgroundColor = (spans[j].style.backgroundColor == "white") ? "black" : "white";
                        }
                    }else if(topValue == tValue){
                        if((lValue == (leftValue + 200)) || (lValue == (leftValue - 200))){
                            spans[j].style.backgroundColor = (spans[j].style.backgroundColor == "white") ? "black" : "white";
                        }
                    }
                }
                check();
            }
        }
        function check() {
            for(var i = 0; i < spans.length; i++){
                if(spans[i].style.backgroundColor != "black"){
                    return;
                }
            }
            window.setTimeout(function () {
                alert("congratulation!");
                reset();
            },100);
        }
    </script>
</body>
</html>